---
import HeadSEO from "@/components/HeadSEO.astro";
import Footer from "@/components/Footer.astro";
import Header from "@/components/Header.astro";
import { ChevronLeft, Calendar } from "lucide-react";

interface Props {
  title: string;
  description: string;
  ogImage?: URL | undefined;
  publishDate?: string;
  featuredImage?: string;
  readingTime?: string;
}

const { title, description, ogImage, publishDate, featuredImage, readingTime } = Astro.props;

// Format date
const formatDate = (dateString: string) => {
  if (!dateString) return '';
  const options: Intl.DateTimeFormatOptions = { year: 'numeric', month: 'long', day: 'numeric' };
  return new Date(dateString).toLocaleDateString('en-US', options);
};

const formattedDate = publishDate ? formatDate(publishDate) : '';
---

<html lang="en">
  <head>
    <HeadSEO title={title} description={description} ogImage={ogImage} />
  </head>
  <body class="bg-background min-h-screen font-sans antialiased">
    <div class="relative flex min-h-screen flex-col">
      <Header />
      
      <main class="flex-auto">
        <!-- Blog post header -->
        <div class="bg-muted py-10 md:py-16">
          <div class="container mx-auto px-4 sm:px-6">
            <div class="mx-auto max-w-3xl">
              <a href="/blog" class="inline-flex items-center text-primary mb-6 hover:underline">
                <ChevronLeft className="h-4 w-4 mr-1" />
                <span>Back to Blog</span>
              </a>
              
              <h1 class="text-3xl md:text-4xl font-bold mb-4">
                {title}
              </h1>
              
              <div class="flex flex-wrap items-center text-muted-foreground gap-x-4 gap-y-2 mb-6">
                {formattedDate && (
                  <div class="flex items-center">
                    <Calendar className="h-4 w-4 mr-1" />
                    <span>{formattedDate}</span>
                  </div>
                )}
                
                {readingTime && (
                  <div class="flex items-center">
                    <span>â€¢</span>
                    <span class="ml-2">{readingTime} min read</span>
                  </div>
                )}
              </div>
            </div>
          </div>
        </div>
        
        {featuredImage && (
          <div class="container mx-auto px-4 sm:px-6 -mt-10 mb-10 relative z-10">
            <div class="mx-auto max-w-4xl">
              <div class="aspect-video w-full overflow-hidden rounded-lg shadow-lg">
                <img 
                  src={featuredImage} 
                  alt={title}
                  class="h-full w-full object-cover"
                />
              </div>
            </div>
          </div>
        )}
        
        <!-- Blog post content -->
        <div class="container mx-auto px-4 sm:px-6 py-10">
          <article class="mx-auto max-w-3xl prose prose-lg prose-stone">
            <slot />
          </article>
        </div>
        
        <!-- Related posts section can be added here -->
      </main>
      
      <!-- DO NOT REMOVE - Necessary for making visual edits via new.website! -->
      <script src="https://api.new.website/static/new-website.js"></script>
      <Footer />
    </div>
  </body>
</html>